var imgReady=function(){var n=[],l=null,e=function(){for(var l=0;l<n.length;l++)n[l].end?n.splice(l--,1):n[l]();!n.length&&o()},o=function(){clearInterval(l),l=null};return function(o,r,t,a){var c,i,u,d,f,h=new Image;if(h.src=o,h.complete)return r.call(h),void(t&&t.call(h));i=h.width,u=h.height,h.onerror=function(){a&&a.call(h),c.end=!0,h=h.onload=h.onerror=null},(c=function(){d=h.width,f=h.height,(d!==i||f!==u||d*f>1024)&&(r.call(h),c.end=!0)})(),h.onload=function(){!c.end&&c(),t&&t.call(h),h=h.onload=h.onerror=null},c.end||(n.push(c),null===l&&(l=setInterval(e,40)))}}();