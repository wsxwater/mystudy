!function(e){"use strict";function t(e,t){for(var n in S)if(S.hasOwnProperty(n)){var a,i,o=S[n];for(a=0;a<o.mods.length;a+=1)"function"==typeof(i=o.mods[a])[e]&&i[e].apply(o.target,[t,o])}}function n(){for(var e in S)if(S.hasOwnProperty(e)){var t=S[e];t.responsive&&w.boot(t)}}function a(e){v+=1,e.id=v,S[v]=e}function i(e){delete S[e.id]}function o(e,t,n){for(e=String(e);e.length<t;)e=String(n)+e;return e}function r(e,t,n){return e>n?n:e<t?t:e}function s(e,t,n,a){for(;e>n;)e-=a;for(;e<t;)e+=a;return e}function u(e){return e.preventDefault(),!1}function c(){window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}function l(e,t,n){n&&e.bind(t+"."+p,function(t){n.apply(e,[t,e.spritespin("data")])})}function d(e){e.unbind("."+p)}function m(t){var n,a,i="string"==typeof t.source?[t.source]:t.source,o=0,r=[],s=t.preloadCount||i.length,u=!1,c=!1;for(n=0;n<i.length;n+=1)a=new Image,r.push(a),a.onload=a.onabort=a.onerror=function(){o+=1,"function"==typeof t.progress&&t.progress({index:e.inArray(this,r),loaded:o,total:i.length,percent:Math.round(o/i.length*100)}),c=c||this===r[0],!u&&o>=s&&c&&"function"==typeof t.complete&&(u=!0,t.complete(r))},a.src=i[n];"function"==typeof t.initiated&&t.initiated(r)}function g(e,t){var n=(t||e).width;if(n*(t||e).height<=1048576)return!1;var a;if(!(a=document.createElement("canvas"))||!a.getContext)return!1;var i=a.getContext("2d");if(!i)return!1;a.width=a.height=1,i.fillStyle="#FF00FF",i.fillRect(0,0,1,1),i.drawImage(e,1-n,0);try{var o=i.getImageData(0,0,1,1).data;return 255===o[0]&&0===o[1]&&255===o[2]}catch(e){return c(e.message,e.stack),!1}}function h(e){if(null!=e.naturalWidth)return{width:e.naturalWidth,height:e.naturalHeight};var t=new Image;return t.src=e.src,{width:t.width,height:t.height}}function f(e){return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}var p="spritespin",w={};window.SpriteSpin=w,w.namespace=p,w.mods={},w.eventNames=["mousedown","mousemove","mouseup","mouseenter","mouseover","mouseleave","dblclick","mousewheel","touchstart","touchmove","touchend","touchcancel","selectstart","gesturestart","gesturechange","gestureend"],w.eventsToPrevent=["dragstart"],w.defaults={source:void 0,width:void 0,height:void 0,frames:void 0,framesX:void 0,lanes:1,sizeMode:void 0,module:"360",behavior:"drag",renderer:"canvas",lane:0,frame:0,frameTime:40,animate:!0,reverse:!1,loop:!0,stopFrame:0,wrap:!0,wrapLane:!1,sense:1,senseLane:void 0,orientation:"horizontal",detectSubsampling:!0,scrollThreshold:50,preloadCount:void 0,onInit:void 0,onProgress:void 0,onLoad:void 0,onFrame:void 0,onDraw:void 0};var v=0,S={};w.instances=S;var b=null;e(window).on("resize",function(){clearTimeout(b),b=setTimeout(n,100)});for(var y=0;y<w.eventNames.length;y+=1)!function(n){e(window.document).bind(n+"."+p,function(e){t("document"+n,e)})}(w.eventNames[y]);w.clamp=r,w.wrap=s,w.bind=l,w.sourceArray=function(e,t){var n=0,a=0,i=0,r=0,s=t.digits||2;t.frame&&(n=t.frame[0],a=t.frame[1]),t.lane&&(i=t.lane[0],r=t.lane[1]);var u,c,l,d=[];for(u=i;u<=r;u+=1)for(c=n;c<=a;c+=1)l=e.replace("{lane}",o(u,s,0)),l=l.replace("{frame}",o(c,s,0)),d.push(l);return d},w.measureSource=function(e){var t=e.images[0],n=h(t);if(1===e.images.length){if(e.sourceWidth=n.width,e.sourceHeight=n.height,e.detectSubsampling&&g(t,n)&&(e.sourceWidth/=2,e.sourceHeight/=2),e.framesX=e.framesX||e.frames,!e.frameWidth||!e.frameHeight)if(e.framesX){e.frameWidth=Math.floor(e.sourceWidth/e.framesX);var a=Math.ceil(e.frames*e.lanes/e.framesX);e.frameHeight=Math.floor(e.sourceHeight/a)}else e.frameWidth=n.width,e.frameHeight=n.height}else e.sourceWidth=e.frameWidth=n.width,e.sourceHeight=e.frameHeight=n.height,g(t,n)&&(e.sourceWidth=e.frameWidth=n.width/2,e.sourceHeight=e.frameHeight=n.height/2),e.frames=e.frames||e.images.length},w.resetInput=function(e){e.startX=e.startY=void 0,e.currentX=e.currentY=void 0,e.oldX=e.oldY=void 0,e.dX=e.dY=e.dW=0,e.ddX=e.ddY=e.ddW=0},w.updateInput=function(e,t){void 0===e.touches&&void 0!==e.originalEvent&&(e.touches=e.originalEvent.touches),t.oldX=t.currentX,t.oldY=t.currentY,void 0!==e.touches&&e.touches.length>0?(t.currentX=e.touches[0].clientX||0,t.currentY=e.touches[0].clientY||0):(t.currentX=e.clientX||0,t.currentY=e.clientY||0),void 0!==t.oldX&&void 0!==t.oldY||(t.oldX=t.currentX,t.oldY=t.currentY),void 0!==t.startX&&void 0!==t.startY||(t.startX=t.currentX,t.startY=t.currentY,t.clickframe=t.frame,t.clicklane=t.lane),t.dX=t.currentX-t.startX,t.dY=t.currentY-t.startY,t.ddX=t.currentX-t.oldX,t.ddY=t.currentY-t.oldY,t.ndX=t.dX/t.width,t.ndY=t.dY/t.height,t.nddX=t.ddX/t.width,t.nddY=t.ddY/t.height},w.updateFrame=function(e,t,n){e.lastFrame=e.frame,e.lastLane=e.lane,void 0!==t?e.frame=Number(t):e.animation&&(e.frame+=e.reverse?-1:1),e.animation?(e.frame=s(e.frame,0,e.frames-1,e.frames),e.loop||e.frame!==e.stopFrame||w.stopAnimation(e)):e.wrap?e.frame=s(e.frame,0,e.frames-1,e.frames):e.frame=r(e.frame,0,e.frames-1),void 0!==n&&(e.lane=n,e.wrapLane?e.lane=s(e.lane,0,e.lanes-1,e.lanes):e.lane=r(e.lane,0,e.lanes-1)),e.lastFrame==e.frame&&e.lastLane==e.lane||e.target.trigger("onFrameChanged",e),e.target.trigger("onFrame",e),e.target.trigger("onDraw",e)},w.stopAnimation=function(e){e.animate=!1,e.animation&&(window.clearInterval(e.animation),e.animation=null)},w.setAnimation=function(e){e.animate?w.requestFrame(e):w.stopAnimation(e)},w.requestFrame=function(e){e.animation||(void 0===e.frameFunction&&(e.frameFunction=function(){try{w.updateFrame(e)}catch(e){}}),e.animation=window.setInterval(e.frameFunction,e.frameTime))},w.setModules=function(t){var n,a,i;for(n=0;n<t.mods.length;n+=1)"string"==typeof(a=t.mods[n])&&((i=w.mods[a])?t.mods[n]=i:e.error("No module found with name "+a))},w.displaySize=function(e){var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),n=Math.floor(e.height||e.frameHeight||e.target.innerHeight());return{width:t,height:n,aspect:t/n}},w.calculateInnerLayout=function(e){var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),n=Math.floor(e.height||e.frameHeight||e.target.innerHeight()),a=t/n,i=e.frameWidth||t,o=e.frameHeight||n,r=i/o,s={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",overflow:"hidden"},u=e.sizeMode;return u&&"scale"!=u?("original"==u?(s.width=i,s.height=o):"fit"==u?r>=a?(s.width=t,s.height=t/r):(s.height=n,s.width=n*r):"fill"==u?r>=a?(s.height=n,s.width=n*r):(s.width=t,s.height=t/r):(s.width=t,s.height=n),s.width=0|s.width,s.height=0|s.height,s.top=(n-s.height)/2|0,s.left=(t-s.width)/2|0,s.right=s.left,s.bottom=s.top,s):s},w.setLayout=function(e){e.target.attr("unselectable","on").css({width:"",height:"","-ms-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),n=Math.floor(e.height||e.frameHeight||e.target.innerHeight());if(e.responsive&&"function"==typeof window.getComputedStyle){var a=getComputedStyle(e.target[0]);if(a.width){var i=t/n;n=(t=0|Number(a.width.replace("px","")))/i|0}}e.target.css({width:t,height:n,position:"relative",overflow:"hidden"});var o=w.calculateInnerLayout(e);e.stage.css(o).hide(),e.canvas&&(e.canvasRatio=e.canvasRatio||f(e.context),e.canvas[0].width=o.width*e.canvasRatio||t,e.canvas[0].height=o.height*e.canvasRatio||n,e.canvas.css(o).hide(),e.context.scale(e.canvasRatio,e.canvasRatio))},w.setEvents=function(e){var t,n,a,i=e.target;for(d(i),n=0;n<w.eventsToPrevent.length;n+=1)l(i,w.eventsToPrevent[n],u);for(t=0;t<e.mods.length;t+=1){for(a=e.mods[t],n=0;n<w.eventNames.length;n+=1)l(i,w.eventNames[n],a[w.eventNames[n]]);l(i,"onInit",a.onInit),l(i,"onProgress",a.onProgress),l(i,"onLoad",a.onLoad),l(i,"onFrameChanged",a.onFrameChanged),l(i,"onFrame",a.onFrame),l(i,"onDraw",a.onDraw)}l(i,"onLoad",function(e,t){w.setAnimation(t)}),l(i,"onInit",e.onInit),l(i,"onProgress",e.onProgress),l(i,"onLoad",e.onLoad),l(i,"onFrameChanged",a.onFrameChanged),l(i,"onFrame",e.onFrame),l(i,"onDraw",e.onDraw)},w.boot=function(e){w.setModules(e),w.setLayout(e),w.setEvents(e),e.target.addClass("loading").trigger("onInit",e),e.loading=!0,m({source:e.source,preloadCount:e.preloadCount,progress:function(t){e.target.trigger("onProgress",[t,e])},complete:function(t){e.images=t,e.loading=!1,w.measureSource(e),w.setLayout(e),e.stage.show(),e.target.removeClass("loading").trigger("onLoad",e).trigger("onFrame",e).trigger("onDraw",e)}})},w.create=function(t){var n=t.target,i=n.data(p);if(i)e.extend(i,t);else{if(i=e.extend({},w.defaults,t),i.source=i.source||[],n.find("img").each(function(){i.source.push(e(this).attr("src"))}),n.empty().addClass("spritespin-instance").append("<div class='spritespin-stage'></div>"),"canvas"===i.renderer){var o=e("<canvas class='spritespin-canvas'></canvas>")[0];o.getContext&&o.getContext("2d")?(i.canvas=e(o),i.context=o.getContext("2d"),n.append(i.canvas),n.addClass("with-canvas")):i.renderer="image"}i.target=n,i.stage=n.find(".spritespin-stage"),n.data(p,i),a(i)}"string"==typeof i.source&&(i.source=[i.source]),i.mods&&(delete i.behavior,delete i.module),(i.behavior||i.module)&&(i.mods=[],i.behavior&&i.mods.push(i.behavior),i.module&&i.mods.push(i.module),delete i.behavior,delete i.module),w.boot(i)},w.destroy=function(e){e&&(i(e),w.stopAnimation(e),d(e.target),e.target.removeData(p))},w.registerModule=function(t,n){return w.mods[t]&&e.error("Module name is already taken: "+t),n=n||{},w.mods[t]=n,n},w.Api=function(e){this.data=e},w.extendApi=function(t){var n,a=w.Api.prototype;for(n in t)t.hasOwnProperty(n)&&(a[n]?e.error("API method is already defined: "+n):a[n]=t[n]);return a},e.fn.spritespin=function(t,n){if("data"===t)return this.data(p);if("api"===t){var a=this.data(p);return a.api=a.api||new w.Api(a),a.api}if("destroy"===t)return e(this).each(function(){w.destroy(e(this).data(p))});if(2===arguments.length&&"string"==typeof t){var i={};i[t]=n,t=i}return"object"==typeof t?(t.target=t.target||e(this),w.create(t),t.target):e.error("Invalid call to spritespin")}}(window.jQuery||window.Zepto||window.$),function(e){"use strict";var t=window.SpriteSpin;t.extendApi({isPlaying:function(){return null!==this.data.animation},isLooping:function(){return this.data.loop},toggleAnimation:function(){this.data.animate=!this.data.animate,t.setAnimation(this.data)},stopAnimation:function(){this.data.animate=!1,t.setAnimation(this.data)},startAnimation:function(){this.data.animate=!0,t.setAnimation(this.data)},loop:function(e){return this.data.loop=e,t.setAnimation(this.data),this},currentFrame:function(){return this.data.frame},updateFrame:function(e){return t.updateFrame(this.data,e),this},skipFrames:function(e){var n=this.data;return t.updateFrame(n,n.frame+(n.reverse?-e:+e)),this},nextFrame:function(){return this.skipFrames(1)},prevFrame:function(){return this.skipFrames(-1)},playTo:function(e,n){var a=this.data;if((n=n||{}).force||a.frame!==e){if(n.nearest){var i=e-a.frame,o=e>a.frame?i-a.frames:i+a.frames,r=Math.abs(i)<Math.abs(o)?i:o;a.reverse=r<0}return a.animate=!0,a.loop=!1,a.stopFrame=e,t.setAnimation(a),this}}})}(window.jQuery||window.Zepto||window.$),function(e){"use strict";function t(e){(e=e||document.documentElement)[u.requestFullscreen]()}function n(){return document[u.fullscreenElement]}function a(){return!!n()}function i(){e(document).unbind(c)}function o(t){i(),e(document).bind(c,t)}function r(){e(window).unbind(l)}function s(t){r(),e(window).bind(l,t)}var u=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,i=n.length,o={};a<i;a++)if((e=n[a])&&e[1]in document){for(a=0,t=e.length;a<t;a++)o[n[0][a]]=e[a];return o}return!1}(),c=u.fullscreenchange+"."+SpriteSpin.namespace+"-fullscreen",l="orientationchange."+SpriteSpin.namespace+"-fullscreen";SpriteSpin.extendApi({fullscreenEnabled:function(){return document[u.fullscreenEnabled]},fullscreenElement:n,exitFullscreen:function(){return document[u.exitFullscreen]()},toggleFullscreen:function(e){a()?this.requestFullscreen(e):this.exitFullscreen()},requestFullscreen:function(e){e=e||{};var n=this.data,u=n.width,c=n.height,l=n.source,d=n.sizeMode,m=n.responsive,g=function(){n.width=window.screen.width,n.height=window.screen.height,n.source=e.source||l,n.sizeMode=e.sizeMode||"fit",n.responsive=!1,SpriteSpin.boot(n)},h=function(){n.width=u,n.height=c,n.source=l,n.sizeMode=d,n.responsive=m,SpriteSpin.boot(n)};o(function(){a()?(g(),s(g)):(i(),r(),h())}),t(n.target[0])}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,n){if(!n.loading&&n.stage.is(":visible")){t.updateInput(e,n);var a,i,o=n.target,r=o.offset();"horizontal"===n.orientation?(a=o.innerWidth()/2,i=n.currentX-r.left):(a=o.innerHeight()/2,i=n.currentY-r.top),t.updateFrame(n,n.frame+(i>a?1:-1))}}t.registerModule("click",{mouseup:n,touchend:n})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,n){n.loading||n.dragging||!n.stage.is(":visible")||(n.dragFrame=n.frame||0,n.dragLane=n.lane||0,n.dragging=!0,t.updateInput(e,n))}function a(e,n){n.dragging&&(n.dragging=!1,t.resetInput(n))}function i(e,n){if(n.dragging){if(t.updateInput(e,n),Math.abs(n.ddX)+Math.abs(n.ddY)>n.scrollThreshold)return n.dragging=!1,void t.resetInput(n);e.preventDefault();var a=0;a="number"==typeof n.orientation?(Number(n.orientation)||0)*Math.PI/180:"horizontal"===n.orientation?0:Math.PI/2;var i=Math.sin(a),o=Math.cos(a),r=(n.nddX*o-n.nddY*i)*n.sense||0,s=(n.nddX*i+n.nddY*o)*(n.senseLane||n.sense)||0;n.dragFrame+=n.frames*r,n.dragLane+=n.lanes*s;var u=Math.floor(n.dragFrame),c=Math.floor(n.dragLane);t.updateFrame(n,u,c),t.stopAnimation(n)}}t.registerModule("drag",{mousedown:n,mousemove:i,mouseup:a,documentmousemove:i,documentmouseup:a,touchstart:n,touchmove:i,touchend:a,touchcancel:a}),t.registerModule("move",{mousemove:function(e,t){n.call(this,e,t),i.call(this,e,t)},mouseleave:a,touchstart:n,touchmove:i,touchend:a,touchcancel:a})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,n){n.loading||n.dragging||!n.stage.is(":visible")||(t.updateInput(e,n),n.dragging=!0,n.animate=!0,t.setAnimation(n))}function a(e,n){n.dragging=!1,t.resetInput(n),t.stopAnimation(n)}function i(e,n){if(n.dragging){t.updateInput(e,n);var a,i,o=n.target,r=o.offset();"horizontal"===n.orientation?(a=o.innerWidth()/2,i=(n.currentX-r().left-a)/a):(a=n.height/2,i=(n.currentY-r().top-a)/a),n.reverse=i<0,i=i<0?-i:i,n.frameTime=80*(1-i)+20,("horizontal"===n.orientation&&n.dX<n.dY||"vertical"===n.orientation&&n.dX<n.dY)&&e.preventDefault()}}t.registerModule("hold",{mousedown:n,mousemove:i,mouseup:a,mouseleave:a,touchstart:n,touchmove:i,touchend:a,touchcancel:a,onFrame:function(){e(this).spritespin("api").startAnimation()}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,n){n.loading||n.dragging||(t.updateInput(e,n),n.dragging=!0)}function a(e,n){if(n.dragging){t.updateInput(e,n);var a=n.frame,i=n.lane;t.updateFrame(n,a,i)}}function i(e,n){if(n.dragging){n.dragging=!1;var a,i,o=n.frame,r=n.lane,s=n.swipeSnap,u=n.swipeFling;"horizontal"===n.orientation?(a=n.ndX,i=n.ddX):(a=n.ndY,i=n.ddY),a>s||i>u?o=n.frame-1:(a<-s||i<-u)&&(o=n.frame+1),t.resetInput(n),t.updateFrame(n,o,r),t.stopAnimation(n)}}t.registerModule("swipe",{onLoad:function(e,t){t.swipeFling=t.swipeFling||10,t.swipeSnap=t.swipeSnap||.5},mousedown:n,mousemove:a,mouseup:i,mouseleave:i,touchstart:n,touchmove:a,touchend:i,touchcancel:i})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(t){var n=t.lane*t.frames+t.frame,a=t.frameWidth*(n%t.framesX),o=t.frameHeight*i(n/t.framesX);if("canvas"===t.renderer){var r=t.canvas[0].width/t.canvasRatio,s=t.canvas[0].height/t.canvasRatio;return t.context.clearRect(0,0,r,s),void t.context.drawImage(t.images[0],a,o,t.frameWidth,t.frameHeight,0,0,r,s)}a=-i(a*t.scaleWidth),o=-i(o*t.scaleHeight),"background"===t.renderer?t.stage.css({"background-image":["url('",t.source[0],"')"].join(""),"background-position":[a,"px ",o,"px"].join("")}):e(t.images).css({top:o,left:a,"max-width":"initial"})}function a(t){var n=t.lane*t.frames+t.frame,a=t.images[n];if("canvas"===t.renderer){if(a&&!1!==a.complete){var i=t.canvas[0].width/t.canvasRatio,o=t.canvas[0].height/t.canvasRatio;t.context.clearRect(0,0,i,o),t.context.drawImage(a,0,0,i,o)}}else"background"===t.renderer?t.stage.css({"background-image":["url('",t.source[n],"')"].join(""),"background-position":[0,"px ",0,"px"].join("")}):(e(t.images).hide(),e(t.images[n]).show())}var i=Math.floor;t.registerModule("360",{onLoad:function(t,n){if(n.width&&n.frameWidth?n.scaleWidth=n.width/n.frameWidth:n.scaleWidth=1,n.height&&n.frameHeight?n.scaleHeight=n.height/n.frameHeight:n.scaleHeight=1,n.sourceIsSprite=1===n.images.length,n.stage.empty().css({"background-image":"none"}).show(),"canvas"===n.renderer){var a=n.canvas[0].width/n.canvasRatio,o=n.canvas[0].height/n.canvasRatio;n.context.clearRect(0,0,a,o),n.canvas.show()}else if("background"===n.renderer){n.sourceIsSprite?(a=i(n.sourceWidth*n.scaleWidth),o=i(n.sourceHeight*n.scaleHeight)):(a=i(n.frameWidth*n.scaleWidth),o=i(n.frameHeight*n.scaleHeight));var r=[a,"px ",o,"px"].join("");n.stage.css({"background-repeat":"no-repeat","-webkit-background-size":r,"-moz-background-size":r,"-o-background-size":r,"background-size":r})}else"image"===n.renderer&&(n.sourceIsSprite?(a=i(n.sourceWidth*n.scaleWidth),o=i(n.sourceHeight*n.scaleHeight)):a=o="100%",e(n.images).appendTo(n.stage).css({width:a,height:o,position:"absolute"}))},onDraw:function(e,t){t.sourceIsSprite?n(t):a(t)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(t){t.blurScope=t.blurScope||{};var n=t.blurScope;return n.canvas=n.canvas||e("<canvas class='blur-layer'></canvas>"),n.context=n.context||n.canvas[0].getContext("2d"),n.steps=n.steps||[],n.fadeTime=Math.max(t.blurFadeTime||200,1),n.frameTime=Math.max(t.blurFrameTime||t.frameTime,16),n.trackTime=null,n.cssBlur=!!t.blurCss,n}function a(e,t){var n=Math.abs(e.frame-e.lastFrame);n>=e.frames/2&&(n=e.frames-n),t.steps.unshift({index:e.lane*e.frames+e.frame,live:1,step:t.frameTime/t.fadeTime,d:n})}function i(e){l.length=0;var t;for(t=0;t<e.length;t+=1)e[t].alpha<=0&&l.push(t);for(t=0;t<l.length;t+=1)e.splice(l[t],1)}function o(e,t){t.timeout=window.setTimeout(function(){c(e,t)},t.frameTime)}function r(e,t){window.clearTimeout(t.timeout),t.timeout=null}function s(e,t){t=Math.min(Math.max(t/2-4,0),1.5),e.css({"-webkit-filter":"blur("+t+"px)",filter:"blur("+t+"px)"})}function u(e,t,n){var a=t.context,i=n.index,o=e.sourceIsSprite?e.images[0]:e.images[i];if(!(n.alpha<=0)&&o&&!1!==o.complete)if(a.globalAlpha=n.alpha,e.sourceIsSprite){var r=e.frameWidth*(i%e.framesX),s=e.frameHeight*Math.floor(i/e.framesX);a.drawImage(o,r,s,e.frameWidth,e.frameHeight,0,0,e.width,e.height)}else a.drawImage(o,0,0,e.width,e.height)}function c(e,t){if(r(e,t),t.context){var n,a,c=0;for(t.context.clearRect(0,0,e.width,e.height),n=0;n<t.steps.length;n+=1)a=t.steps[n],a.live=Math.max(a.live-a.step,0),a.alpha=Math.max(a.live-.25,0),u(e,t,a),c+=a.alpha+a.d;t.cssBlur&&s(t.canvas,c),i(t.steps),t.steps.length&&o(e,t)}}var l=[];t.registerModule("blur",{onLoad:function(e,a){var i=n(a),o=t.calculateInnerLayout(a);i.canvas[0].width=a.width*a.canvasRatio,i.canvas[0].height=a.height*a.canvasRatio,i.canvas.css(o).show(),i.context.scale(a.canvasRatio,a.canvasRatio),a.target.append(i.canvas)},onFrameChanged:function(e,t){var i=n(t);a(t,i),null==i.timeout&&o(t,i)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,t){t.dragging&&(o(t,t.easeScope),i(t,t.easeScope))}function a(e,t){for(var n,a,i=t.easeScope,s=i.samples,u=0,c=0,l=0,d=0;d<s.length;d+=1)if(a=s[d],n){var m=a.time-n.time;if(m>t.easeAbortAfterMs)return u=c=l=0,o(t,i);c+=a.frame-n.frame,u+=a.lane-n.lane,l+=m,n=a}else n=a;s.length=0,l&&(i.ms=t.easeUpdateTime,i.lane=t.lane,i.lanes=0,i.laneStep=u/l*i.ms,i.frame=t.frame,i.frames=0,i.frameStep=c/l*i.ms,r(t,i))}function i(e,t){for(t.samples.push({time:(new Date).getTime(),frame:e.dragFrame,lane:e.dragLane});t.samples.length>e.easeSamples;)t.samples.shift()}function o(e,t){null!=t.timeout&&(window.clearTimeout(t.timeout),t.timeout=null)}function r(e,t){t.timeout=window.setTimeout(function(){s(e,t)},t.ms)}function s(e,n){n.lanes+=n.laneStep,n.frames+=n.frameStep,n.laneStep*=e.easeDamping,n.frameStep*=e.easeDamping;var a=Math.floor(n.frame+n.frames),i=Math.floor(n.lane+n.lanes);t.updateFrame(e,a,i),e.dragging?o(e,n):Math.abs(n.frameStep)>.005||Math.abs(n.laneStep)>.005?r(e,n):o(e,n)}var u=Math.max,c=Math.min;t.registerModule("ease",{onLoad:function(e,t){t.easeAbortAfterMs=u(t.easeAbortAfterMs||250,0),t.easeDamping=u(c(t.easeDamping||.9,.999),0),t.easeSamples=u(t.easeSamples||5,1),t.easeUpdateTime=u(t.easeUpdateTime||t.frameTime,16),t.easeScope={samples:[],steps:[]}},mousemove:n,mouseup:a,mouseleave:a,touchmove:n,touchend:a,touchcancel:a})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";t.registerModule("gallery",{onLoad:function(n,a){a.galleryImages=[],a.galleryOffsets=[],a.gallerySpeed=500,a.galleryOpacity=.25,a.galleryFrame=0,a.galleryStage=a.galleryStage||e("<div/>"),a.stage.prepend(a.galleryStage),a.galleryStage.empty();var i,o=0;for(i=0;i<a.source.length;i+=1){var r=e("<img src='"+a.source[i]+"'/>");a.galleryStage.append(r),a.galleryImages.push(r);var s=a.height/r[0].height;a.galleryOffsets.push(-o+(a.width-r[0].width*s)/2),o+=a.width,r.css({"max-width":"initial",opacity:a.galleryOpacity,width:a.width,height:a.height})}var u=t.calculateInnerLayout(a);a.galleryStage.css(u).css({width:o}),a.galleryImages[a.galleryFrame].animate({opacity:1},a.gallerySpeed)},onDraw:function(e,t){t.galleryFrame===t.frame||t.dragging?(t.dragging||t.dX!=t.gallerydX)&&(t.galleryDX=t.DX,t.galleryDDX=t.DDX,t.galleryStage.stop(!0,!0).animate({left:t.galleryOffsets[t.frame]+t.dX})):(t.galleryStage.stop(!0,!1),t.galleryStage.animate({left:t.galleryOffsets[t.frame]},t.gallerySpeed),t.galleryImages[t.galleryFrame].animate({opacity:t.galleryOpacity},t.gallerySpeed),t.galleryFrame=t.frame,t.galleryImages[t.galleryFrame].animate({opacity:1},t.gallerySpeed))}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";var n=Math.floor;t.registerModule("panorama",{onLoad:function(e,t){t.stage.empty().show(),t.frames=t.sourceWidth,"horizontal"===t.orientation?(t.scale=t.height/t.sourceHeight,t.frames=t.sourceWidth):(t.scale=t.width/t.sourceWidth,t.frames=t.sourceHeight);var a=[n(t.sourceWidth*t.scale),"px ",n(t.sourceHeight*t.scale),"px"].join("");t.stage.css({"max-width":"initial","background-image":["url('",t.source[0],"')"].join(""),"background-repeat":"repeat-both","-webkit-background-size":a,"-moz-background-size":a,"-o-background-size":a,"background-size":a})},onDraw:function(e,t){var a=0,i=0;"horizontal"===t.orientation?a=-n(t.frame%t.frames*t.scale):i=-n(t.frame%t.frames*t.scale),t.stage.css({"background-position":[a,"px ",i,"px"].join("")})}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function n(e,n){e.preventDefault(),n.dragging=!1,!e.touches&&e.originalEvent&&(e.touches=e.originalEvent.touches);var a,i,o,r;e.touches&&e.touches.length?(a=e.touches[0].clientX||0,i=e.touches[0].clientY||0):(a=e.clientX||0,i=e.clientY||0),a/=n.width,i/=n.height,null==n.zoomPX&&(n.zoomPX=a,n.zoomPY=i),null==n.zoomX&&(n.zoomX=a,n.zoomY=i),o=a-n.zoomPX,r=i-n.zoomPY,n.zoomPX=a,n.zoomPY=i,e.type.match(/touch/)&&(o=-o,r=-r),n.zoomX=t.clamp(n.zoomX+o,0,1),n.zoomY=t.clamp(n.zoomY+r,0,1),t.updateFrame(n)}function a(t,a){t.preventDefault();var i=(new Date).getTime();{if(a.zoomClickTime)return i-a.zoomClickTime>(a.zoomDoubleClickTime||500)?void(a.zoomClickTime=i):(a.zoomClickTime=0,void(e(this).spritespin("api").toggleZoom()&&n(t,a)));a.zoomClickTime=i}}function i(e,t){t.zoomStage.is(":visible")&&n(e,t)}t.registerModule("zoom",{mousedown:a,touchstart:a,mousemove:i,touchmove:i,onInit:function(t,n){n.zoomStage||(n.zoomStage=e("<div class='spritezoom-stage'></div>").css({width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute"}).appendTo(n.target).hide())},onDestroy:function(e,t){t.zoomStage&&t.zoomStage.remove()},onDraw:function(t,n){var a=n.lane*n.frames+n.frame,i=(n.zoomSource||n.source)[a];if(i){var o=n.zoomX,r=n.zoomY;null!=o&&null!=r||(o=n.zoomX=.5,r=n.zoomY=.5),o=100*o|0,r=100*r|0,n.zoomStage.css({"background-repeat":"no-repeat","background-image":["url('",i,"')"].join(""),"background-position":[o,"% ",r,"%"].join("")})}else e.error("'zoomSource' option is missing or it contains unsufficient number of frames.")}}),t.extendApi({toggleZoom:function(){var t=this.data;return t.zoomStage?t.zoomStage.is(":visible")?(t.zoomStage.fadeOut(),t.stage.fadeIn(),!1):(t.zoomStage.fadeIn(),t.stage.fadeOut(),!0):(e.error("zoom module is not initialized or is not available."),!1)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin);