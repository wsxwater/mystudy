<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>覆盖</title>
      <style type="text/css">
            *{margin:0;padding:0;} 
            #buttons{width: 1200px;margin:0px auto;}
            #buttons a{text-decoration: none;display: block;color: #FFF;background-color: orange;width: 240px;text-align: center;float: left;font-size: 18px;height: 40px;line-height: 40px;margin:5px;}
      </style>
</head>
<body>
	<canvas id="canvas" style="border:1px solid #CCC;display: block;margin:0px auto;">当前浏览器不支持canvas，请更换浏览器再试 >o< 。</canvas>

      <div id="buttons">
            <a href="javascript:;">source-over</a>
            <a href="javascript:;">source-atop</a>
            <a href="javascript:;">source-in</a>
            <a href="javascript:;">source-out</a>
            <a href="javascript:;">destination-over</a>
            <a href="javascript:;">destination-atop</a>
            <a href="javascript:;">destination-in</a>
            <a href="javascript:;">destination-out</a>
            <a href="javascript:;">lighter</a>
            <a href="javascript:;">copy</a>
            <a href="javascript:;">xor</a>
      </div>

	<script type="text/javascript">
	    
		window.onload=function(){
                  /*var canvas=document.getElementById('canvas');
                  var context=canvas.getContext('2d');
                  canvas.width=1000;
                  canvas.height=600; */

                  /*
                     globalCompositeOperation="source-over"||"destination-over||...";
                     source-over:后绘制的 覆盖 最先绘制的;
                     destination-over:最先绘制的 覆盖 后绘制的;
                   */ 

                  /*context.globalCompositeOperation="destination-over";
                  context.beginPath();
                  context.fillStyle="#ff6600";
                  context.arc(400,400,200,0,Math.PI*2);
                  context.fill()
                  context.closePath();

                  context.beginPath();
                  context.fillStyle="#000";
                  context.rect(400,400,300,300);
                  context.fill()
                  context.closePath();*/
                  draw("source-over");

                  var obuttons=document.getElementById('buttons');
                  var btn=obuttons.getElementsByTagName('a');
                  for (var i = 0; i < btn.length; i++) {
                        
                        btn[i].onclick=function(){
                             draw(this.text);
                             
                             return false;
                        }
                  }

            }

            function draw(compositeSytle){
			var canvas=document.getElementById('canvas');
			var context=canvas.getContext('2d');
                  canvas.width=1200;
                  canvas.height=800;
                  context.clearRect(0,0,canvas.width,canvas.height);

                  // draw title
                  context.fillStyle="#blue";
                  context.font="bold 40px Arial";
                  context.textAlign="center";
                  context.fillText('globalCompositeOperation='+compositeSytle,canvas.width/2,40,canvas.width);
                  context.fill();
                  
                  // draw rect 
                  context.fillStyle="blue";
                  context.fillRect(300,300,300,300);
                  

                  // draw circle 
                  context.globalCompositeOperation=compositeSytle;
                  context.fillStyle="red";
                  context.beginPath();
                  context.arc(400,300,160,0,Math.PI*2);
                  context.closePath();
                  context.fill();
                  

                  console.log(compositeSytle)



            }
	</script>
</body>
</html>