<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="robots" content="NOINDEX,NOFOLLOW,NOARCHIVE">
	<title>Document</title>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		.card {position: relative;background-color: #fff;}
		.card .card-image {position: relative;}
		.card .card-image img {display: block;position: relative;left: 0;right: 0;top: 0;bottom: 0;width: 100%;}
		.card .card-image canvas {background-repeat: no-repeat;background-size: 100% 100%;}
	</style>
</head>
<body>

    <div class="card">
    	<div class="card-image">
    		<img src="28.jpg" id="canvasCover">
		    <canvas id="canvas"></canvas>
	    </div>
    </div> 

    <script type="text/javascript">     
    (function(parentStyle){         
    	parentStyle.mozUserSelect = 'none';         
    	parentStyle.webkitUserSelect = 'none';  
    	     
    	var img = new Image();         
    	var canvas = document.querySelector('#canvas');    
    	var canvasCover=document.querySelector('#canvasCover');   
        
    	canvas.style.backgroundColor='transparent';         
    	canvas.style.position = 'absolute';  
    	/*canvasCover.addEventListener('load',function(e){*/
	    	img.addEventListener('load',function(e){  
	    		var ctx;
	    		var w = canvasCover.width, h = canvasCover.height;             
	    		var offsetX = canvas.offsetLeft, offsetY = canvas.offsetTop;             
	    		var mousedown = false;               
	    		function layer(ctx){                 
	    			ctx.fillStyle = 'gray';                 
	    			ctx.fillRect(0, 0, w, h);             
	    		}   
	    		function eventDown(e){                 
	    			e.preventDefault();                 
	    			mousedown=true;             
	    		}   
	    		function eventUp(e){                 
	    			e.preventDefault();                 
	    			mousedown=false;             
	    		}               
	    		function eventMove(e){                 
	    			e.preventDefault();                 
	    			if(mousedown){                     
	    				if(e.changedTouches){                         
	    					e=e.changedTouches[e.changedTouches.length-1];                     
	    				}                     
	    				var x = (e.clientX + document.body.scrollLeft || e.pageX) - offsetX || 0,                         
	    				y = (e.clientY + document.body.scrollTop || e.pageY) - offsetY || 0;                     
	    				with(ctx){                    
	    					beginPath()                     
	    					arc(x, y, 5, 0, Math.PI * 2);                         
	    					fill();                     
	    				}                
	    			}             
	    		}               
	    		canvas.width=w;             
	    		canvas.height=h;             
	    		canvas.style.backgroundImage='url('+img.src+')';               
	    		ctx=canvas.getContext('2d');             
	    		ctx.fillStyle='transparent';             
	    		ctx.fillRect(0, 0, w, h);             
	    		layer(ctx);               
	    		ctx.globalCompositeOperation = 'destination-out';               
	    		canvas.addEventListener('touchstart', eventDown);             
	    		canvas.addEventListener('touchend', eventUp);             
	    		canvas.addEventListener('touchmove', eventMove);             
	    		canvas.addEventListener('mousedown', eventDown);             
	    		canvas.addEventListener('mouseup', eventUp);             
	    		canvas.addEventListener('mousemove', eventMove);       
	    	});
    	/*});  */       
    	
    	img.src = 'http://pic1.win4000.com/wallpaper/f/51c3bb99a21ea.jpg';

    })(document.querySelector('.card').style);/*document.body.style*/
    </script>
</body>
</html>